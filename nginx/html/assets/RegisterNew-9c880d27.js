import{x as e,X as s,r as a,z as l,A as t,L as r,V as o,I as n,ak as i,C as u,M as c,K as m,aB as d,ac as p,ax as f,y as x}from"./vue-4e979bb7.js";import{u as g,_ as y}from"./index-4bf8c7f1.js";import{E as b}from"./elementPlus-e3fc6f82.js";const v={class:"auth-container flex items-center justify-center w-full h-screen"},w={class:"relative z-10 w-full max-w-md px-8 py-10 auth-card rounded-xl shadow-2xl animate-fadeIn"},h={class:"relative"},k={key:0,class:"error-message text-red-500 text-sm mt-1"},N={class:"relative"},M={key:0,class:"error-message text-red-500 text-sm mt-1"},P={class:"relative"},j=["type"],V={key:0,class:"error-message text-red-500 text-sm mt-1"},_={class:"relative"},U=["type"],C={key:0,class:"error-message text-red-500 text-sm mt-1"},z={class:"flex items-center"},A={key:0,class:"error-message text-red-500 text-sm"},I=["disabled"],E={key:0,class:"fas fa-spinner fa-spin mr-2"},$=y(e({__name:"RegisterNew",setup(e){const y=f(),$=g(),B=s({loginName:"",password:"",confirmPassword:"",userMail:""}),K=a(!1),L=a(!1),O=a(!1),R=a(!1),S=s({loginName:"",password:"",confirmPassword:"",userMail:"",agreement:""}),X=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Z=async()=>{if((()=>{let e=!0;return Object.keys(S).forEach((e=>{S[e]=""})),B.loginName.trim()?B.loginName.length<3?(S.loginName="用户名长度不能少于3位",e=!1):/^[a-zA-Z0-9_]+$/.test(B.loginName)||(S.loginName="用户名只能包含字母、数字和下划线",e=!1):(S.loginName="请输入用户名",e=!1),B.userMail.trim()?X.test(B.userMail)||(S.userMail="请输入有效的邮箱地址",e=!1):(S.userMail="请输入邮箱地址",e=!1),B.password?B.password.length<6&&(S.password="密码长度不能少于6位",e=!1):(S.password="请输入密码",e=!1),B.confirmPassword?B.password!==B.confirmPassword&&(S.confirmPassword="两次输入的密码不一致",e=!1):(S.confirmPassword="请再次输入密码",e=!1),R.value||(S.agreement="请同意用户协议和隐私政策",e=!1),e})()){console.log("准备注册:",B),K.value=!0;try{await $.registerAction(B.loginName,B.password,B.userMail)&&(b.success("注册成功！请登录"),y.push("/login"))}catch(e){console.error("注册错误:",e),b.error("网络错误，请稍后重试")}finally{K.value=!1}}},q=()=>{y.push("/login")};return(e,s)=>(x(),l("div",v,[t("div",w,[s[17]||(s[17]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},[t("i",{class:"fas fa-user-plus text-blue-600 mr-2"}),r("用户注册 ")]),t("p",{class:"text-gray-600"},"创建您的软唐知识产权管理账户")],-1)),t("form",{onSubmit:o(Z,["prevent"]),class:"space-y-5"},[t("div",null,[s[8]||(s[8]=t("label",{class:"block text-gray-700 mb-1 font-medium"},"用户名",-1)),t("div",h,[s[7]||(s[7]=t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500"},[t("i",{class:"fas fa-user"})],-1)),n(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>B.loginName=e),class:u(["w-full py-2.5 pl-10 pr-3 border rounded-lg focus:outline-none form-control",{"input-error":S.loginName}]),placeholder:"请输入用户名"},null,2),[[i,B.loginName]])]),S.loginName?(x(),l("p",k,c(S.loginName),1)):m("",!0)]),t("div",null,[s[10]||(s[10]=t("label",{class:"block text-gray-700 mb-1 font-medium"},"邮箱",-1)),t("div",N,[s[9]||(s[9]=t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500"},[t("i",{class:"fas fa-envelope"})],-1)),n(t("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=e=>B.userMail=e),class:u(["w-full py-2.5 pl-10 pr-3 border rounded-lg focus:outline-none form-control",{"input-error":S.userMail}]),placeholder:"请输入邮箱地址"},null,2),[[i,B.userMail]])]),S.userMail?(x(),l("p",M,c(S.userMail),1)):m("",!0)]),t("div",null,[s[12]||(s[12]=t("label",{class:"block text-gray-700 mb-1 font-medium"},"密码",-1)),t("div",P,[s[11]||(s[11]=t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500"},[t("i",{class:"fas fa-lock"})],-1)),n(t("input",{type:L.value?"text":"password","onUpdate:modelValue":s[2]||(s[2]=e=>B.password=e),class:u(["w-full py-2.5 pl-10 pr-10 border rounded-lg focus:outline-none form-control",{"input-error":S.password}]),placeholder:"请输入密码"},null,10,j),[[d,B.password]]),t("button",{type:"button",onClick:s[3]||(s[3]=e=>L.value=!L.value),class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500"},[t("i",{class:u([L.value?"fa-eye-slash":"fa-eye","fas"])},null,2)])]),S.password?(x(),l("p",V,c(S.password),1)):m("",!0)]),t("div",null,[s[14]||(s[14]=t("label",{class:"block text-gray-700 mb-1 font-medium"},"确认密码",-1)),t("div",_,[s[13]||(s[13]=t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500"},[t("i",{class:"fas fa-lock"})],-1)),n(t("input",{type:O.value?"text":"password","onUpdate:modelValue":s[4]||(s[4]=e=>B.confirmPassword=e),class:u(["w-full py-2.5 pl-10 pr-10 border rounded-lg focus:outline-none form-control",{"input-error":S.confirmPassword}]),placeholder:"请再次输入密码"},null,10,U),[[d,B.confirmPassword]]),t("button",{type:"button",onClick:s[5]||(s[5]=e=>O.value=!O.value),class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500"},[t("i",{class:u([O.value?"fa-eye-slash":"fa-eye","fas"])},null,2)])]),S.confirmPassword?(x(),l("p",C,c(S.confirmPassword),1)):m("",!0)]),t("div",z,[n(t("input",{type:"checkbox",id:"agreement","onUpdate:modelValue":s[6]||(s[6]=e=>R.value=e),class:"h-4 w-4 text-blue-600"},null,512),[[p,R.value]]),s[15]||(s[15]=t("label",{for:"agreement",class:"ml-2 text-gray-600 text-sm"},[r(" 我已阅读并同意 "),t("a",{href:"#",class:"text-blue-600 hover:underline"},"用户协议"),r(" 和 "),t("a",{href:"#",class:"text-blue-600 hover:underline"},"隐私政策")],-1))]),S.agreement?(x(),l("p",A,c(S.agreement),1)):m("",!0),t("button",{type:"submit",disabled:K.value,class:"w-full py-2.5 px-4 bg-gradient-primary text-white rounded-lg btn-hover-effect flex items-center justify-center"},[K.value?(x(),l("i",E)):m("",!0),t("span",null,c(K.value?"注册中...":"立即注册"),1)],8,I),t("div",{class:"text-center mt-6"},[t("p",{class:"text-gray-600 text-sm"},[s[16]||(s[16]=r(" 已有账号? ")),t("a",{href:"javascript:void(0);",onClick:q,class:"text-blue-600 hover:underline"},"立即登录")])])],32),s[18]||(s[18]=t("div",{class:"absolute bottom-4 right-4 opacity-50"},[t("i",{class:"fas fa-user-plus fa-spin text-blue-400 text-xl"}),t("i",{class:"fas fa-cog fa-spin-pulse text-teal-400 text-sm ml-2"})],-1))])]))}}),[["__scopeId","data-v-9dfc77ce"]]);export{$ as default};
