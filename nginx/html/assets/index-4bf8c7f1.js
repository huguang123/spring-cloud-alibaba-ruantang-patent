import{x as e,G as t,ag as a,y as o,aw as n,r,c as s,h as i,z as l,A as u,P as c,H as d,C as m,ax as g,L as p,u as f,K as _,M as h,T as I,J as v,ay as y,az as A,aA as E,at as b}from"./vue-4e979bb7.js";import{E as w,a as P,b as S,c as T,d as x,e as L,m as k,f as O,o as j,k as R,g as D,h as N,i as z,p as $,l as q,s as C,j as V,n as M,r as B,u as F,q as J,t as U,v as G,w as H,x as W,y as K,z as Q,A as X,B as Y,C as Z,D as ee,F as te}from"./elementPlus-e3fc6f82.js";function ae(e,t){var a;return e="object"==typeof(a=e)&&null!==a?e:Object.create(null),new Proxy(e,{get:(e,a,o)=>"key"===a?Reflect.get(e,a,o):Reflect.get(e,a,o)||Reflect.get(t,a,o)})}function oe(e,{storage:t,serializer:a,key:o,debug:n}){try{const n=null==t?void 0:t.getItem(o);n&&e.$patch(null==a?void 0:a.deserialize(n))}catch(r){n&&console.error("[pinia-plugin-persistedstate]",r)}}function ne(e,{storage:t,serializer:a,key:o,paths:n,debug:r}){try{const r=Array.isArray(n)?function(e,t){return t.reduce(((t,a)=>{const o=a.split(".");return function(e,t,a){return t.slice(0,-1).reduce(((e,t)=>/^(__proto__)$/.test(t)?{}:e[t]=e[t]||{}),e)[t[t.length-1]]=a,e}(t,o,function(e,t){return t.reduce(((e,t)=>null==e?void 0:e[t]),e)}(e,o))}),{})}(e,n):e;t.setItem(o,a.serialize(r))}catch(s){r&&console.error("[pinia-plugin-persistedstate]",s)}}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var re=function(e={}){return t=>{const{auto:a=!1}=e,{options:{persist:o=a},store:n,pinia:r}=t;if(!o)return;if(!(n.$id in r.state.value)){const e=r._s.get(n.$id.replace("__hot:",""));return void(e&&Promise.resolve().then((()=>e.$persist())))}const s=(Array.isArray(o)?o.map((t=>ae(t,e))):[ae(o,e)]).map(function(e,t){return a=>{var o;try{const{storage:n=localStorage,beforeRestore:r,afterRestore:s,serializer:i={serialize:JSON.stringify,deserialize:JSON.parse},key:l=t.$id,paths:u=null,debug:c=!1}=a;return{storage:n,beforeRestore:r,afterRestore:s,serializer:i,key:(null!=(o=e.key)?o:e=>e)("string"==typeof l?l:l(t.$id)),paths:u,debug:c}}catch(n){return a.debug&&console.error("[pinia-plugin-persistedstate]",n),null}}}(e,n)).filter(Boolean);n.$persist=()=>{s.forEach((e=>{ne(n.$state,e)}))},n.$hydrate=({runHooks:e=!0}={})=>{s.forEach((a=>{const{beforeRestore:o,afterRestore:r}=a;e&&(null==o||o(t)),oe(n,a),e&&(null==r||r(t))}))},s.forEach((e=>{const{beforeRestore:a,afterRestore:o}=e;null==a||a(t),oe(n,e),null==o||o(t),n.$subscribe(((t,a)=>{ne(a,e)}),{detached:!0})}))}}();const se=e({__name:"App",setup:e=>(e,n)=>{const r=a("router-view");return o(),t(r)}}),ie={},le=function(e,t,a){if(!t||0===t.length)return e();const o=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in ie)return;ie[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(!!a)for(let a=o.length-1;a>=0;a--){const n=o[a];if(n.href===e&&(!t||"stylesheet"===n.rel))return}else if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((t,a)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))};function ue(){return localStorage.getItem("tenant_id")||""}const ce=async(e,t="GET",a=null,o=!1)=>{try{const n=`${o?"/ums":"/ums/auth"}${e}`;console.log(`准备发送请求: ${t} ${n}`);const r={"Content-Type":"application/json"},s=localStorage.getItem("auth_token");s&&(r.Authorization=`Bearer ${s}`);const i={method:t,headers:r};a&&(i.body=JSON.stringify(a));const l=new AbortController,u=setTimeout((()=>l.abort()),1e4);i.signal=l.signal,console.log("发送Fetch请求:",{url:n,method:t,headers:r,body:a?JSON.stringify(a):void 0});const c=await fetch(n,i);return clearTimeout(u),c.ok?await c.json():"/login"===e&&"POST"===t?(console.log("API不可用，使用模拟数据"),await de(a)):{code:c.status,message:`HTTP错误: ${c.status} ${c.statusText}`,data:null}}catch(n){return console.error("API请求错误:",n),"/login"===e&&"POST"===t?(console.log("API不可用，使用模拟数据"),await de(a)):{code:500,message:n.message||"网络错误，请稍后重试",data:null}}},de=async e=>new Promise((t=>{setTimeout((()=>{e&&e.loginName&&e.password?t({code:200,message:"登录成功",data:{token:"mock_token_"+Math.random().toString(36).substring(2),userId:(new Date).getTime()}}):t({code:401,message:"用户名或密码错误",data:null})}),800)})),me=n("user",(()=>{const e=r(""),t=r({id:"",username:"",avatar:"",roles:[],permissions:[]}),a=s((()=>!!e.value||!!localStorage.getItem("auth_token")));async function o(){try{const e=await(async()=>{try{console.log("开始获取用户信息...");const e=await fetch("/ums/api/user/users/info",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!e.ok)throw new Error(`获取用户信息失败: ${e.status}`);const t=await e.json();return console.log("用户信息API返回数据:",t),t}catch(e){return console.error("获取用户信息API调用失败:",e),{code:500,message:e instanceof Error?e.message:"未知错误",data:null}}})();if(console.log("获取用户信息响应:",e),200===e.code&&e.data){const a=e.data,o=a.user,n=a.roles||[];if(console.log("用户数据:",o),console.log("角色数据:",n),!o)throw console.error("用户数据为空:",a),new Error("用户数据为空");const r=o.id,s=o.userName,i=o.loginName,l=o.tenantId,u=o.orgId,c=o.userMail;console.log("提取的用户信息:",{userId:r,userName:s,loginName:i,tenantId:l,orgId:u,userMail:c}),r&&localStorage.setItem("user_id",String(r)),l&&localStorage.setItem("tenant_id",String(l)),u&&localStorage.setItem("org_id",String(u)),t.value={id:String(r||""),username:s||i||"",avatar:o.avatar||"https://randomuser.me/api/portraits/men/1.jpg",roles:n.map((e=>e.rolesName||e.rolesCode||""))||["user"],permissions:o.permissions||[]},console.log("最终用户信息状态:",t.value),console.log("获取用户信息成功",{userId:r,tenantId:l,orgId:u,userName:s})}else{const e="1001",a="1";localStorage.setItem("tenant_id",e),localStorage.setItem("org_id",a),localStorage.setItem("user_id","1"),t.value={id:"1",username:"admin",avatar:"https://randomuser.me/api/portraits/men/1.jpg",roles:["admin"],permissions:["dashboard:view","organization:view","organization:edit","template:view","template:edit"]},console.warn("无法获取用户信息，使用默认数据，租户ID:",e,"组织ID:",a)}}catch(e){console.error("获取用户信息失败:",e),w.error("获取用户信息失败");const a="1001",o="1";localStorage.setItem("tenant_id",a),localStorage.setItem("org_id",o),localStorage.setItem("user_id","1"),t.value={id:"1",username:"admin",avatar:"https://randomuser.me/api/portraits/men/1.jpg",roles:["admin"],permissions:["dashboard:view","organization:view","organization:edit","template:view","template:edit"]},console.warn("使用模拟用户数据，租户ID:",a,"组织ID:",o)}}return{token:e,userInfo:t,isLoggedIn:a,loginAction:async function(t,a){try{const n=await(async(e,t,a="")=>(console.log("调用登录API，使用相对路径"),ce("/login","POST",{loginName:e,password:t,userMail:a},!1)))(t,a);return 200===n.code&&n.data?(e.value=n.data.token,localStorage.setItem("auth_token",n.data.token),localStorage.setItem("user_id",n.data.userId),await o(),w.success(n.message||"登录成功"),!0):(w.error(n.message||"登录失败，请检查用户名和密码"),!1)}catch(n){return console.error("登录失败:",n),w.error("登录失败，请检查用户名和密码"),!1}},registerAction:async function(e,t,a=""){try{console.log("开始注册用户:",{loginName:e,userMail:a});const o=await(async(e,t,a="")=>(console.log("调用注册API，使用相对路径"),ce("/register","POST",{loginName:e,password:t,userMail:a},!1)))(e,t,a);return 200===o.code&&o.data?(w.success(o.message||"注册成功"),!0):(w.error(o.message||"注册失败，请稍后重试"),!1)}catch(o){return console.error("注册失败:",o),w.error("注册失败，请检查网络连接"),!1}},getUserInfoAction:o,logoutAction:function(){try{(async()=>{ce("/logout","POST",null,!1)})(),e.value="",t.value={id:"",username:"",avatar:"",roles:[],permissions:[]},localStorage.removeItem("user_id"),localStorage.removeItem("tenant_id"),localStorage.removeItem("org_id"),localStorage.removeItem("tenant_id"),localStorage.removeItem("org_id"),w.success("退出登录成功")}catch(a){console.error("退出登录失败:",a),w.error("退出登录失败")}finally{localStorage.removeItem("auth_token")}},hasPermission:function(e){return!!["提示词工程","模板工厂"].includes(e)||t.value.permissions.includes(e)}}}),{persist:{paths:["token"]}}),ge={class:"layout-container"},pe={class:"logo-container flex items-center justify-center h-16 border-b border-gray-200"},fe={key:0,src:"/assets/logo-9c8fa26a.svg",alt:"Logo",class:"h-8"},_e={key:1,src:"/assets/logo-mini-603bb030.svg",alt:"Logo",class:"h-8"},he={class:"sidebar-footer flex items-center justify-center p-2 border-t border-gray-200"},Ie={class:"main-content"},ve={class:"header bg-white border-b border-gray-200"},ye={class:"flex items-center justify-between px-4 h-16"},Ae={class:"flex items-center"},Ee={class:"flex items-center"},be={class:"flex items-center cursor-pointer user-info-container"},we={class:"user-details ml-2"},Pe={class:"user-name"},Se={class:"user-role"},Te={class:"page-content p-6"},xe=(e,t)=>{const a=e.__vccOpts||e;for(const[o,n]of t)a[o]=n;return a},Le=[{path:"/login",name:"Login",component:()=>le((()=>import("./LoginNew-bcce8b42.js")),["assets/LoginNew-bcce8b42.js","assets/vue-4e979bb7.js","assets/elementPlus-e3fc6f82.js","assets/LoginNew-d842d500.css"]),meta:{title:"登录 - 软唐知识产权后台管理系统",requiresAuth:!1}},{path:"/register",name:"Register",component:()=>le((()=>import("./RegisterNew-9c880d27.js")),["assets/RegisterNew-9c880d27.js","assets/vue-4e979bb7.js","assets/elementPlus-e3fc6f82.js","assets/RegisterNew-789b8441.css"]),meta:{title:"注册 - 软唐知识产权后台管理系统",requiresAuth:!1}},{path:"/login-new",name:"LoginNew",component:()=>le((()=>import("./LoginNew-bcce8b42.js")),["assets/LoginNew-bcce8b42.js","assets/vue-4e979bb7.js","assets/elementPlus-e3fc6f82.js","assets/LoginNew-d842d500.css"]),meta:{requiresAuth:!1}},{path:"/",component:xe(e({__name:"MainLayout",setup(e){const n=g(),y=me(),A=s((()=>y.userInfo));i(A,(e=>{console.log("MainLayout - 用户信息变化:",e)}),{deep:!0,immediate:!0});const E=r(!1),b=()=>{E.value=!E.value};function w(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}function te(){n.push("/profile")}function ae(){n.push("/settings")}function oe(){G.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{y.logoutAction(),n.push("/login")}))}async function ne(){try{console.log("手动刷新用户信息..."),await y.getUserInfoAction(),console.log("用户信息刷新成功:",y.userInfo)}catch(e){console.error("刷新用户信息失败:",e)}}return(e,n)=>{const r=H,s=W,i=K,g=P,G=S,re=Q,se=T,ie=x,le=X,ue=Y,ce=Z,de=ee,me=L,xe=a("router-view");return o(),l("div",ge,[u("aside",{class:m(["sidebar",{"sidebar-collapsed":E.value}])},[u("div",pe,[E.value?(o(),l("img",_e)):(o(),l("img",fe))]),c(g,{"default-active":"dashboard",collapse:E.value,class:"sidebar-menu","background-color":"#ffffff","text-color":"#333333","active-text-color":"#409EFF",router:!0},{default:d((()=>{return[c(s,{index:"/dashboard"},{title:d((()=>n[0]||(n[0]=[p("仪表盘")]))),default:d((()=>[c(r,null,{default:d((()=>[c(f(k))])),_:1})])),_:1}),c(i,{index:"organization-management"},{title:d((()=>[c(r,null,{default:d((()=>[c(f(O))])),_:1}),n[1]||(n[1]=u("span",null,"组织架构管理中心",-1))])),default:d((()=>[c(s,{index:"/organization/tree"},{default:d((()=>n[2]||(n[2]=[p("组织架构")]))),_:1})])),_:1}),c(s,{index:"/tenant"},{title:d((()=>n[3]||(n[3]=[p("租户管理中心")]))),default:d((()=>[c(r,null,{default:d((()=>[c(f(j))])),_:1})])),_:1}),c(i,{index:"permission"},{title:d((()=>[c(r,null,{default:d((()=>[c(f(R))])),_:1}),n[4]||(n[4]=u("span",null,"权限配置中心",-1))])),default:d((()=>[c(s,{index:"/permission/basic"},{default:d((()=>n[5]||(n[5]=[p("基础权限配置")]))),_:1}),c(s,{index:"/permission/system-template-config"},{default:d((()=>n[6]||(n[6]=[p("系统模板权限配置")]))),_:1})])),_:1}),c(i,{index:"enterprise-template"},{title:d((()=>[c(r,null,{default:d((()=>[c(f(D))])),_:1}),n[7]||(n[7]=u("span",null,"企业模板管理中心",-1))])),default:d((()=>[c(s,{index:"/enterprise-template/list"},{default:d((()=>n[8]||(n[8]=[p("企业模板列表")]))),_:1})])),_:1}),c(i,{index:"role-management"},{title:d((()=>[c(r,null,{default:d((()=>[c(f(N))])),_:1}),n[9]||(n[9]=u("span",null,"角色管理中心",-1))])),default:d((()=>[c(s,{index:"/role-management/list"},{default:d((()=>n[10]||(n[10]=[p("角色列表")]))),_:1})])),_:1}),(e="提示词工程",y.hasPermission(e)?(o(),t(i,{key:0,index:"3"},{title:d((()=>[c(r,null,{default:d((()=>[c(f(z))])),_:1}),n[11]||(n[11]=u("span",null,"提示词工程",-1))])),default:d((()=>[c(s,{index:"/promptengine"},{default:d((()=>n[12]||(n[12]=[p("提示词工程概览")]))),_:1}),c(s,{index:"/promptengine/domain-config"},{default:d((()=>n[13]||(n[13]=[p("技术领域管理")]))),_:1}),c(s,{index:"/promptengine/template-management"},{default:d((()=>n[14]||(n[14]=[p("提示词模板管理")]))),_:1}),c(s,{index:"/promptengine/writer"},{default:d((()=>n[15]||(n[15]=[p("交底书撰写")]))),_:1})])),_:1})):_("",!0)),c(s,{index:"/portrait"},{title:d((()=>n[16]||(n[16]=[p("智能画像")]))),default:d((()=>[c(r,null,{default:d((()=>[c(f($))])),_:1})])),_:1}),c(s,{index:"/audit"},{title:d((()=>n[17]||(n[17]=[p("审计追踪")]))),default:d((()=>[c(r,null,{default:d((()=>[c(f(q))])),_:1})])),_:1}),c(s,{index:"/settings"},{title:d((()=>n[18]||(n[18]=[p("系统设置")]))),default:d((()=>[c(r,null,{default:d((()=>[c(f(C))])),_:1})])),_:1})];var e})),_:1},8,["collapse"]),u("div",he,[c(G,{type:"text",onClick:b},{default:d((()=>[c(r,null,{default:d((()=>[u("i",{class:m(E.value?"fas fa-chevron-right":"fas fa-chevron-left")},null,2)])),_:1})])),_:1})])],2),u("div",Ie,[u("header",ve,[u("div",ye,[u("div",Ae,[c(se,{separator:"/"},{default:d((()=>[c(re,{to:{path:"/"}},{default:d((()=>n[19]||(n[19]=[p("首页")]))),_:1}),e.$route.meta.title?(o(),t(re,{key:0},{default:d((()=>[p(h(e.$route.meta.title),1)])),_:1})):_("",!0)])),_:1})]),u("div",Ee,[c(ie,{content:"全屏",placement:"bottom"},{default:d((()=>[c(G,{type:"text",onClick:w},{default:d((()=>[c(r,null,{default:d((()=>[c(f(V))])),_:1})])),_:1})])),_:1}),c(ie,{content:"通知",placement:"bottom"},{default:d((()=>[c(le,{value:3,class:"ml-4"},{default:d((()=>[c(G,{type:"text"},{default:d((()=>[c(r,null,{default:d((()=>[c(f(M))])),_:1})])),_:1})])),_:1})])),_:1}),c(me,{trigger:"click",class:"ml-4"},{dropdown:d((()=>[c(de,null,{default:d((()=>[c(ce,{onClick:ne},{default:d((()=>[c(r,null,{default:d((()=>[c(f(B))])),_:1}),n[20]||(n[20]=p("刷新用户信息 "))])),_:1}),c(ce,{onClick:te},{default:d((()=>[c(r,null,{default:d((()=>[c(f(F))])),_:1}),n[21]||(n[21]=p("个人中心 "))])),_:1}),c(ce,{onClick:ae},{default:d((()=>[c(r,null,{default:d((()=>[c(f(C))])),_:1}),n[22]||(n[22]=p("账号设置 "))])),_:1}),c(ce,{divided:"",onClick:oe},{default:d((()=>[c(r,null,{default:d((()=>[c(f(J))])),_:1}),n[23]||(n[23]=p("退出登录 "))])),_:1})])),_:1})])),default:d((()=>{var e;return[u("div",be,[c(ue,{size:32,src:A.value.avatar,class:"user-avatar"},null,8,["src"]),u("div",we,[u("span",Pe,h(A.value.username||"用户"),1),u("span",Se,h((null==(e=A.value.roles)?void 0:e[0])||"普通用户"),1)]),c(r,{class:"el-icon--right ml-1"},{default:d((()=>[c(f(U))])),_:1})])]})),_:1})])])]),u("main",Te,[c(xe,null,{default:d((({Component:e})=>[c(I,{name:"fade",mode:"out-in"},{default:d((()=>[(o(),t(v(e)))])),_:2},1024)])),_:1})])])])}}}),[["__scopeId","data-v-6aeca201"]]),redirect:"/dashboard",children:[{path:"dashboard",name:"Dashboard",component:()=>le((()=>import("./Index-23d114f8.js")),["assets/Index-23d114f8.js","assets/echarts-f3f581e5.js","assets/elementPlus-e3fc6f82.js","assets/vue-4e979bb7.js","assets/Index-2199f343.css"]),meta:{requiresAuth:!0,title:"仪表盘"}},{path:"organization/tree",name:"OrganizationTree",component:()=>le((()=>import("./OrganizationTree-2595f073.js")),["assets/OrganizationTree-2595f073.js","assets/vue-4e979bb7.js","assets/elementPlus-e3fc6f82.js","assets/format-42e477fa.js","assets/PageHeader-80806eff.js","assets/PageHeader-f857d916.css","assets/request-811deccb.js","assets/errorHandler-e80e1e70.js","assets/OrganizationTree-4164fe8b.css"]),meta:{requiresAuth:!0,title:"组织架构管理"}},{path:"tenant",name:"TenantManagement",component:()=>le((()=>import("./Index-0302ae88.js")),["assets/Index-0302ae88.js","assets/vue-4e979bb7.js","assets/elementPlus-e3fc6f82.js","assets/PageHeader-80806eff.js","assets/PageHeader-f857d916.css","assets/request-811deccb.js","assets/permission-c6efb21f.js","assets/format-42e477fa.js","assets/errorHandler-e80e1e70.js","assets/Index-1ffee355.css"]),meta:{requiresAuth:!0,title:"租户管理中心"}},{path:"permission/basic",name:"BasicPermission",component:()=>le((()=>import("./BasicPermission-ef042bdd.js")),["assets/BasicPermission-ef042bdd.js","assets/vue-4e979bb7.js","assets/PageHeader-80806eff.js","assets/PageHeader-f857d916.css","assets/elementPlus-e3fc6f82.js","assets/permission-c6efb21f.js","assets/request-811deccb.js","assets/errorHandler-e80e1e70.js","assets/BasicPermission-31a48a3e.css"]),meta:{requiresAuth:!0,title:"基础权限配置"}},{path:"permission/system-template-config",name:"SystemTemplatePermissionConfig",component:()=>le((()=>import("./SystemTemplatePermission-3c28bd74.js")),["assets/SystemTemplatePermission-3c28bd74.js","assets/PageHeader-80806eff.js","assets/vue-4e979bb7.js","assets/PageHeader-f857d916.css","assets/elementPlus-e3fc6f82.js","assets/request-811deccb.js","assets/permission-c6efb21f.js","assets/errorHandler-e80e1e70.js","assets/SystemTemplatePermission-b5bb2e89.css"]),meta:{requiresAuth:!0,title:"系统模板权限配置"}},{path:"enterprise-template/list",name:"EnterpriseTemplateList",component:()=>le((()=>import("./TemplateList-75965024.js")),["assets/TemplateList-75965024.js","assets/vue-4e979bb7.js","assets/elementPlus-e3fc6f82.js","assets/PageHeader-80806eff.js","assets/PageHeader-f857d916.css","assets/request-811deccb.js","assets/role-c05f7109.js","assets/format-42e477fa.js","assets/errorHandler-e80e1e70.js","assets/TemplateList-2972fd26.css"]),meta:{requiresAuth:!0,title:"企业模板列表"}},{path:"role-management/list",name:"RoleList",component:()=>le((()=>import("./RoleList-28d0e14b.js")),["assets/RoleList-28d0e14b.js","assets/vue-4e979bb7.js","assets/elementPlus-e3fc6f82.js","assets/PageHeader-80806eff.js","assets/PageHeader-f857d916.css","assets/role-c05f7109.js","assets/request-811deccb.js","assets/errorHandler-e80e1e70.js","assets/format-42e477fa.js","assets/RoleList-1ed6a080.css"]),meta:{requiresAuth:!0,title:"角色列表"}},{path:"promptengine",name:"PromptEngine",component:()=>le((()=>import("./Index-e48915e8.js")),["assets/Index-e48915e8.js","assets/vue-4e979bb7.js","assets/elementPlus-e3fc6f82.js","assets/Index-9f758544.css"]),meta:{requiresAuth:!0,title:"提示词工程"}},{path:"promptengine/domain-config",name:"DomainConfig",component:()=>le((()=>import("./DomainConfigNew-3593c089.js")),["assets/DomainConfigNew-3593c089.js","assets/vue-4e979bb7.js","assets/elementPlus-e3fc6f82.js","assets/errorHandler-e80e1e70.js","assets/DomainConfigNew-b8710dfb.css"]),meta:{requiresAuth:!0,title:"技术领域管理 - 软唐知识产权后台管理系统"}},{path:"promptengine/template-management",name:"TemplateManagement",component:()=>le((()=>import("./TemplateManagementNew-268b0171.js")),["assets/TemplateManagementNew-268b0171.js","assets/errorHandler-e80e1e70.js","assets/elementPlus-e3fc6f82.js","assets/vue-4e979bb7.js","assets/TemplateManagementNew-c8b16a41.css"]),meta:{requiresAuth:!0,title:"提示词模板管理 - 软唐知识产权后台管理系统"}},{path:"promptengine/writer",name:"Writer",component:()=>le((()=>import("./WriterNew-3a0576d3.js")),["assets/WriterNew-3a0576d3.js","assets/elementPlus-e3fc6f82.js","assets/vue-4e979bb7.js","assets/errorHandler-e80e1e70.js","assets/WriterNew-55aca582.css"]),meta:{requiresAuth:!0,title:"交底书撰写 - 软唐知识产权后台管理系统"}},{path:"portrait",name:"Portrait",component:()=>le((()=>import("./Index-c056fcdb.js")),["assets/Index-c056fcdb.js","assets/echarts-f3f581e5.js","assets/request-811deccb.js","assets/elementPlus-e3fc6f82.js","assets/vue-4e979bb7.js","assets/Index-4a4286a4.css"]),meta:{requiresAuth:!0,title:"智能画像"}},{path:"profile",name:"Profile",component:()=>le((()=>import("./Profile-695dc163.js")),["assets/Profile-695dc163.js","assets/elementPlus-e3fc6f82.js","assets/vue-4e979bb7.js","assets/auth-ef5ad292.js","assets/request-811deccb.js","assets/errorHandler-e80e1e70.js","assets/Profile-34fc348a.css"]),meta:{requiresAuth:!0,title:"个人中心"}},{path:"settings",name:"Settings",component:()=>le((()=>import("./Settings-7fa13eeb.js")),["assets/Settings-7fa13eeb.js","assets/vue-4e979bb7.js","assets/elementPlus-e3fc6f82.js","assets/auth-ef5ad292.js","assets/request-811deccb.js","assets/Settings-47d59464.css"]),meta:{requiresAuth:!0,title:"账号设置"}}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>le((()=>import("./NotFound-24f19e6d.js")),["assets/NotFound-24f19e6d.js","assets/vue-4e979bb7.js","assets/elementPlus-e3fc6f82.js","assets/NotFound-d1ce4dc1.css"])}],ke=y({history:A(),routes:Le});ke.beforeEach((async(e,t,a)=>{const o=me();if(console.log("路由守卫触发:",e.path),console.log("当前登录状态:",o.isLoggedIn),console.log("当前租户ID:",localStorage.getItem("tenant_id")),e.meta.requiresAuth)if(o.isLoggedIn){if(!localStorage.getItem("tenant_id")||e.path.includes("/organization")&&!localStorage.getItem("tenant_id"))try{console.log("路由守卫：尝试获取用户信息..."),await o.getUserInfoAction();const t=localStorage.getItem("tenant_id");if(console.log("路由守卫：获取用户信息成功，租户ID:",t),e.path.includes("/organization")&&!t)return console.error("访问组织页面但租户ID仍为空，重定向到仪表盘"),w.error("租户信息获取失败，请重新登录"),void a("/dashboard")}catch(n){if(console.error("路由守卫：获取用户信息失败:",n),e.path.includes("/organization"))return void a("/dashboard")}a()}else a("/login");else"/login"!==e.path&&"/register"!==e.path||!o.isLoggedIn?a():a("/dashboard")})),console.log("应用初始化中...");const Oe=E();Oe.use(re);const je=b(se);je.use(Oe),je.use(ke),je.use(te),je.mount("#app"),console.log("应用已启动，API请求将使用相对路径");export{xe as _,ue as g,me as u};
