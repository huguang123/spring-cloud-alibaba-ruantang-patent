import{x as e,X as s,r as a,k as t,z as l,A as r,L as o,V as n,I as i,ak as c,C as m,M as u,K as d,aB as p,ac as f,ax as x,y as g}from"./vue-4e979bb7.js";import{u as b,_ as y}from"./index-08374d78.js";import{E as v}from"./elementPlus-e3fc6f82.js";const w={class:"auth-container flex items-center justify-center w-full h-screen"},h={class:"relative z-10 w-full max-w-md px-8 py-10 auth-card rounded-xl shadow-2xl animate-fadeIn"},N={class:"relative"},k={key:0,class:"error-message text-red-500 text-sm mt-1"},I={class:"relative"},_=["type"],j={key:0,class:"error-message text-red-500 text-sm mt-1"},S={class:"flex items-center justify-between"},U={class:"flex items-center"},V=["disabled"],A={key:0,class:"fas fa-spinner fa-spin mr-2"},C=y(e({__name:"LoginNew",setup(e){const y=x(),C=b(),L=s({loginName:"",password:"",userMail:""}),z=a(!1),M=a(!1),B=a(!1),E=s({loginName:"",password:""}),K=async()=>{if((()=>{let e=!0;return E.loginName="",E.password="",L.loginName.trim()||(E.loginName="请输入用户名",e=!1),L.password?L.password.length<6&&(E.password="密码长度不能少于6位",e=!1):(E.password="请输入密码",e=!1),e})()){console.log("准备登录:",L),z.value=!0;try{await C.loginAction(L.loginName,L.password)&&(await C.getUserInfoAction(),B.value?localStorage.setItem("remember_username",L.loginName):localStorage.removeItem("remember_username"),y.push("/dashboard"))}catch(e){console.error("登录错误:",e),v.error("网络错误，请稍后重试")}finally{z.value=!1}}},P=()=>{y.push("/register")};return t((()=>{const e=localStorage.getItem("remember_username");e&&(L.loginName=e,B.value=!0),C.isLoggedIn&&y.push("/dashboard")})),(e,s)=>(g(),l("div",w,[r("div",h,[s[11]||(s[11]=r("div",{class:"text-center mb-8"},[r("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},[r("i",{class:"fas fa-shield-alt text-blue-600 mr-2"}),o("软唐知识产权后台管理系统 ")]),r("p",{class:"text-gray-600"},"一站式知识产权管理与服务平台")],-1)),r("form",{onSubmit:n(K,["prevent"]),class:"space-y-5"},[r("div",null,[s[5]||(s[5]=r("label",{class:"block text-gray-700 mb-1 font-medium"},"用户名",-1)),r("div",N,[s[4]||(s[4]=r("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500"},[r("i",{class:"fas fa-user"})],-1)),i(r("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>L.loginName=e),class:m(["w-full py-2.5 pl-10 pr-3 border rounded-lg focus:outline-none form-control",{"input-error":E.loginName}]),placeholder:"请输入用户名"},null,2),[[c,L.loginName]])]),E.loginName?(g(),l("p",k,u(E.loginName),1)):d("",!0)]),r("div",null,[s[7]||(s[7]=r("label",{class:"block text-gray-700 mb-1 font-medium"},"密码",-1)),r("div",I,[s[6]||(s[6]=r("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500"},[r("i",{class:"fas fa-lock"})],-1)),i(r("input",{type:M.value?"text":"password","onUpdate:modelValue":s[1]||(s[1]=e=>L.password=e),class:m(["w-full py-2.5 pl-10 pr-10 border rounded-lg focus:outline-none form-control",{"input-error":E.password}]),placeholder:"请输入密码"},null,10,_),[[p,L.password]]),r("button",{type:"button",onClick:s[2]||(s[2]=e=>M.value=!M.value),class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500"},[r("i",{class:m([M.value?"fa-eye-slash":"fa-eye","fas"])},null,2)])]),E.password?(g(),l("p",j,u(E.password),1)):d("",!0)]),r("div",S,[r("div",U,[i(r("input",{type:"checkbox",id:"remember","onUpdate:modelValue":s[3]||(s[3]=e=>B.value=e),class:"h-4 w-4 text-blue-600"},null,512),[[f,B.value]]),s[8]||(s[8]=r("label",{for:"remember",class:"ml-2 text-gray-600 text-sm"},"记住我",-1))]),s[9]||(s[9]=r("a",{href:"#",class:"text-sm text-blue-600 hover:underline"},"忘记密码?",-1))]),r("button",{type:"submit",disabled:z.value,class:"w-full py-2.5 px-4 bg-gradient-primary text-white rounded-lg btn-hover-effect flex items-center justify-center"},[z.value?(g(),l("i",A)):d("",!0),r("span",null,u(z.value?"登录中...":"登录"),1)],8,V),r("div",{class:"text-center mt-6"},[r("p",{class:"text-gray-600 text-sm"},[s[10]||(s[10]=o(" 还没有账号? ")),r("a",{href:"javascript:void(0);",onClick:P,class:"text-blue-600 hover:underline"},"立即注册")])])],32),s[12]||(s[12]=r("div",{class:"absolute bottom-4 right-4 opacity-50"},[r("i",{class:"fas fa-cog fa-spin text-blue-400 text-xl"}),r("i",{class:"fas fa-cog fa-spin-pulse text-teal-400 text-sm ml-2"})],-1))])]))}}),[["__scopeId","data-v-4366dc26"]]);export{C as default};
