import{E as e}from"./elementPlus-e3fc6f82.js";const o=(o,s,r=!0)=>{var n,l,a;console.error("=== 错误处理开始 ==="),console.error("默认消息:",s),console.error("错误对象:",o),console.error("错误对象类型:",typeof o),console.error("是否有response:",!!(null==o?void 0:o.response)),console.error("response状态码:",null==(n=null==o?void 0:o.response)?void 0:n.status),console.error("response.data:",null==(l=null==o?void 0:o.response)?void 0:l.data);let t=s;if(o&&"object"==typeof o)if(console.log("✓ 错误是对象类型"),o.response&&o.response.data){const e=o.response.data;console.log("✓ 找到 error.response.data:",e),console.log("✓ responseData 类型:",typeof e),e.message?(t=String(e.message),console.log("✅ 成功从responseData.message提取错误信息:",t)):e.msg?(t=String(e.msg),console.log("✅ 成功从responseData.msg提取错误信息:",t)):e.error?(t=String(e.error),console.log("✅ 成功从responseData.error提取错误信息:",t)):"string"==typeof e?(t=e,console.log("✅ responseData是字符串:",t)):(console.log("❌ responseData中没有找到message/msg/error字段"),console.log("❌ responseData的所有属性:",Object.keys(e)))}else console.log("❌ 没有找到 error.response.data"),(null==(a=o.data)?void 0:a.message)?(t=String(o.data.message),console.log("✅ 从error.data.message提取错误信息:",t)):o.message&&"string"==typeof o.message?(console.log("检查 error.message:",o.message),o.message.includes("status code")||o.message.includes("Network Error")||o.message.includes("timeout")||o.message.includes("ECONNABORTED")?console.log("❌ error.message 包含HTTP状态码或网络错误，跳过"):(t=o.message,console.log("✅ 从error.message提取错误信息:",t))):console.log("❌ 无法从错误对象中提取错误信息");else console.log("❌ 错误不是对象类型");return"string"==typeof o&&(t=o,console.log("✅ 错误是字符串:",t)),console.log("=== 最终错误信息 ===:",t),console.log("=== 错误处理结束 ==="),r&&e.error(t),t},s=(o,s,r,n=!0)=>{if(!o||200!==o.code&&0!==o.code&&!0!==o.success){let s=r;return(null==o?void 0:o.message)?s=o.message:(null==o?void 0:o.msg)?s=o.msg:(null==o?void 0:o.error)&&(s=o.error),n&&e.error(s),!1}return n&&e.success(s),!0},r=e=>{try{const o="string"==typeof e?parseInt(e):e,s=new Date(o);return isNaN(s.getTime())?"无效日期":s.toLocaleString()}catch(o){return console.error("日期格式化失败:",o,e),"无效日期"}};export{s as a,r as f,o as h};
